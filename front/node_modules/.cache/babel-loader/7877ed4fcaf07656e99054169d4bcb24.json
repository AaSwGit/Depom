{"ast":null,"code":"var _jsxFileName = \"/Users/bunyo/React/react-libpro/src/UserPage.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport ReactDOM from 'react-dom';\nimport \"./BooksPage.css\";\nimport App from \"./App\";\nimport { getUserBooksUrl } from \"./AppVariables\";\nimport { getUsersUrl } from \"./AppVariables\";\nimport Modal from \"react-modal\";\n\nclass UserPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.openModal = () => {\n      this.setState({\n        modalIsOpen: true\n      });\n    };\n\n    this.closeModal = () => {\n      this.setState({\n        modalIsOpen: false\n      });\n    };\n\n    this.changedSelect = event => {\n      this.counter++;\n      this.setState({\n        bookButtonStyle: {\n          visibility: \"visible\"\n        }\n      });\n      this.setState({\n        selectedId: event.target.value\n      });\n\n      if (this.counter > 1) {\n        var book = this.state.books.find(books => books.id == event.target.value);\n        this.setState({\n          author: book.author\n        });\n        this.setState({\n          pages: book.pages\n        });\n        this.setState({\n          bookName: book.bookName\n        });\n      } else {\n        event.target.remove(0);\n        var book = this.state.books.find(books => books.id == event.target.value);\n        this.setState({\n          author: book.author\n        });\n        this.setState({\n          pages: book.pages\n        });\n      }\n    };\n\n    this.handleSubmit = event => {\n      switch (event.target.name) {\n        case \"add\":\n          this.add(this.props.userId, this.state.selectedId);\n          break;\n\n        case \"details\":\n          this.openModal();\n\n        default:\n      }\n    };\n\n    this.deleteSubmit = event => {\n      const Id = event.target.name;\n      axios({\n        method: \"delete\",\n        url: getUserBooksUrl() + \"/\" + Id,\n        auth: {\n          username: this.props.userName,\n          password: this.props.password\n        }\n      }).then(res => {\n        this.reflesh(this.props.userName, this.props.password);\n      }).catch(error => {\n        alert(\"Silme başarısız Id: \" + Id + \" bulunmadı\");\n      });\n    };\n\n    this.state = {\n      books: props.books,\n      userbooks: props.userbooks,\n      selectedId: \"0\",\n      bookName: \"\",\n      author: \"\",\n      pages: 0,\n      bookButtonStyle: {\n        visibility: \"hidden\"\n      },\n      modalIsOpen: false\n    };\n    this.counter = 0;\n  }\n\n  exitPage(event) {\n    ReactDOM.render(React.createElement(App, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 25\n      },\n      __self: this\n    }), document.getElementById('root'));\n  }\n\n  reflesh(userName, password) {\n    axios({\n      method: \"get\",\n      url: getUserBooksUrl() + \"/\" + this.props.userId,\n      auth: {\n        username: userName,\n        password: password\n      }\n    }).then(res => {\n      this.setState({\n        userbooks: res.data\n      });\n    }).catch(error => {\n      alert(\"Bağlantı hatası userbooks reflesh\");\n    });\n  }\n\n  renderData() {\n    return this.state.books.map((details, index) => {\n      const id = details.id,\n            bookName = details.bookName;\n      return React.createElement(\"option\", {\n        key: id,\n        value: id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, bookName);\n    });\n  }\n\n  add(userId, bookId) {\n    const book = {\n      id: bookId\n    };\n    const user = {\n      id: userId\n    };\n    axios({\n      method: \"post\",\n      url: getUserBooksUrl(),\n      data: {\n        user: user,\n        book: book\n      },\n      auth: {\n        username: this.props.userName,\n        password: this.props.password\n      }\n    }).then(res => {\n      this.reflesh(this.props.userName, this.props.password);\n    }).catch(error => {\n      alert(\"Ekleme başarısız\");\n    });\n  }\n\n  renderTable() {\n    return this.state.userbooks.map((details, index) => {\n      const id = details.id,\n            book = details.book,\n            createdAt = details.createdAt;\n      const date = new Date(createdAt).getHours() + \":\" + new Date(createdAt).getMinutes() + \":\" + new Date(createdAt).getSeconds() + \" \" + new Date(createdAt).getDate() + \"/\" + (Number(new Date(createdAt).getMonth()) + 1) + \"/\" + new Date(createdAt).getFullYear();\n      return React.createElement(\"tr\", {\n        key: id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, book.bookName), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, date), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"X\",\n        name: id,\n        onClick: this.deleteSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      })));\n    });\n  }\n\n  renderBookModalDet() {\n    return React.createElement(Modal, {\n      isOpen: this.state.modalIsOpen,\n      className: \"Modal\",\n      onRequestClose: this.closeModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      className: \"form-style-7\",\n      onSubmit: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Kitap Ad\\u0131:\", this.pro.pages)), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"Yazar:\", this.state.author)), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"Sayfa Say\\u0131s\\u0131:\", this.state.pages)), React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, this.state.infoMessage)))));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, this.renderBookModalDet(), React.createElement(\"div\", {\n      className: \"box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      style: this.state.bookButtonStyle,\n      value: \"i\",\n      name: \"details\",\n      onClick: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }), React.createElement(\"select\", {\n      onChange: this.changedSelect,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"Kitap Se\\xE7iniz\"), this.renderData()), React.createElement(\"input\", {\n      type: \"submit\",\n      style: this.state.bookButtonStyle,\n      value: \"+\",\n      name: \"add\",\n      onClick: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"button\",\n      value: \"\\xC7\\u0131k\",\n      name: \"exit\",\n      onClick: this.exitPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      type: \"userName\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, this.props.userName)), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(\"table\", {\n      id: \"books\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \"Kitap Ad\\u0131\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"Tarih\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"D\\xFCzenle\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, this.renderTable())));\n  }\n\n}\n\nexport default UserPage;","map":{"version":3,"sources":["/Users/bunyo/React/react-libpro/src/UserPage.js"],"names":["React","axios","ReactDOM","App","getUserBooksUrl","getUsersUrl","Modal","UserPage","Component","constructor","props","openModal","setState","modalIsOpen","closeModal","changedSelect","event","counter","bookButtonStyle","visibility","selectedId","target","value","book","state","books","find","id","author","pages","bookName","remove","handleSubmit","name","add","userId","deleteSubmit","Id","method","url","auth","username","userName","password","then","res","reflesh","catch","error","alert","userbooks","exitPage","render","document","getElementById","data","renderData","map","details","index","bookId","user","renderTable","createdAt","date","Date","getHours","getMinutes","getSeconds","getDate","Number","getMonth","getFullYear","renderBookModalDet","pro","infoMessage"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport ReactDOM from 'react-dom';\nimport \"./BooksPage.css\"\nimport App from \"./App\";\nimport {getUserBooksUrl} from \"./AppVariables\";\nimport {getUsersUrl} from \"./AppVariables\";\nimport Modal from \"react-modal\";\n\nclass UserPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {books:props.books,userbooks:props.userbooks,selectedId:\"0\"\n    ,bookName:\"\",author:\"\",pages:0,bookButtonStyle:{visibility:\"hidden\"},modalIsOpen:false\n  };\n  this.counter = 0;\n}\nopenModal = () => {\n  this.setState({modalIsOpen:true});\n}\ncloseModal = () =>{\n  this.setState({modalIsOpen:false});\n}\nexitPage(event){\n  ReactDOM.render(<App/>, document.getElementById('root'));\n}\nreflesh(userName,password){\n  axios({\n    method: \"get\",\n    url: getUserBooksUrl()+\"/\"+this.props.userId,\n    auth: {\n      username: userName,\n      password: password\n    }\n  })\n  .then(res => {\n    this.setState({userbooks:res.data});\n  })\n  .catch(error => {\n    alert(\"Bağlantı hatası userbooks reflesh\")\n  });\n}\nrenderData() {\n  return this.state.books.map((details, index) => {\n    const {id,bookName} = details;\n    return (\n      <option key={id} value={id}>{bookName}</option>\n    )\n  })\n}\nadd(userId,bookId){\n  const book = {id:bookId};\n  const user = {id:userId};\n  axios({\n    method: \"post\",\n    url: getUserBooksUrl(),\n    data: {\n      user : user,\n      book : book\n    },\n    auth: {\n      username: this.props.userName,\n      password: this.props.password\n    }\n  })\n  .then(res => {\n    this.reflesh(this.props.userName,this.props.password);\n  })\n  .catch(error => {\n    alert(\"Ekleme başarısız\")\n  });\n}\nchangedSelect = (event)=>{\n  this.counter++;\n  this.setState({bookButtonStyle:{visibility:\"visible\"}});\n  this.setState({selectedId : event.target.value});\n  if(this.counter > 1){\n    var book = this.state.books.find(books => books.id == event.target.value);\n    this.setState({author : book.author});\n    this.setState({pages : book.pages});\n    this.setState({bookName:book.bookName});\n  }\n  else{\n    event.target.remove(0);\n    var book = this.state.books.find(books => books.id == event.target.value);\n    this.setState({author : book.author});\n    this.setState({pages : book.pages});\n  }\n}\nhandleSubmit = (event) =>{\n  switch (event.target.name) {\n    case \"add\":\n    this.add(this.props.userId,this.state.selectedId);\n    break;\n    case \"details\":\n    this.openModal();\n    default:\n  }\n}\ndeleteSubmit = (event) => {\n  const Id = event.target.name;\n  axios({\n    method: \"delete\",\n    url: getUserBooksUrl()+\"/\"+Id,\n    auth: {\n      username: this.props.userName,\n      password: this.props.password\n    }\n  })\n  .then(res => {\n    this.reflesh(this.props.userName,this.props.password);\n  })\n  .catch(error => {\n    alert(\"Silme başarısız Id: \"+Id+\" bulunmadı\");\n  });\n}\nrenderTable(){\n  return this.state.userbooks.map((details, index) => {\n    const { id,book,createdAt } = details;\n    const date = new Date(createdAt).getHours() + \":\"\n    + new Date(createdAt).getMinutes() + \":\"\n    + new Date(createdAt).getSeconds() + \" \"\n    + new Date(createdAt).getDate() + \"/\"\n    + (Number(new Date(createdAt).getMonth())+1) + \"/\"\n    + new Date(createdAt).getFullYear();\n    return (\n      <tr key={id}>\n        <td>{book.bookName}</td>\n        <td>{date}</td>\n        <td><input type=\"submit\" value=\"X\" name={id} onClick={this.deleteSubmit}/></td>\n      </tr>\n    )\n  })\n}\nrenderBookModalDet(){\n  return(\n    <Modal\n      isOpen={this.state.modalIsOpen}\n      className=\"Modal\"\n      onRequestClose={this.closeModal}\n      >\n        <form className=\"form-style-7\" onSubmit={this.handleSubmit}>\n          <ul>\n            <li><span>Kitap Adı:{this.pro.pages}</span></li>\n            <li><span>Yazar:{this.state.author}</span></li>\n            <li><span>Sayfa Sayısı:{this.state.pages}</span></li>\n            <li><span>{this.state.infoMessage}</span></li>\n          </ul>\n        </form>\n      </Modal>\n  )\n}\nrender(){\n  return(\n    <div>\n      {this.renderBookModalDet()}\n        <div className=\"box\">\n          <input type=\"submit\" style={this.state.bookButtonStyle}value=\"i\" name=\"details\" onClick={this.handleSubmit} />\n          <select onChange={this.changedSelect}>\n            <option value=\"0\">Kitap Seçiniz</option>\n            {this.renderData()}\n          </select>\n          <input type=\"submit\" style={this.state.bookButtonStyle} value=\"+\" name=\"add\" onClick={this.handleSubmit} />\n          <input type=\"button\" value=\"Çık\" name=\"exit\" onClick={this.exitPage} />\n          <p type=\"userName\">{this.props.userName}</p>\n        </div>\n        <div>\n        </div>\n        <table id=\"books\">\n          <thead>\n            <tr>\n              <th>Kitap Adı</th>\n              <th>Tarih</th>\n              <th>Düzenle</th>\n            </tr>\n          </thead>\n          <tbody>\n            {this.renderTable()}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\nexport default UserPage;\n"]},"metadata":{},"sourceType":"module"}