{"ast":null,"code":"var _jsxFileName = \"/Users/bunyo/React/react-libpro/src/UserPage.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport ReactDOM from 'react-dom';\nimport \"./BooksPage.css\";\nimport App from \"./App\";\nimport { getUserBooksUrl } from \"./AppVariables\";\nimport { getUsersUrl } from \"./AppVariables\";\n\nclass UserPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      books: props.books,\n      userbooks: props.userbooks,\n      electedId: \"0\",\n      author: \"\",\n      pages: 0\n    };\n    this.counter = 0;\n    this.changedSelect = this.changedSelect.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.exitPage = this.exitPage.bind(this);\n    this.deleteSubmit = this.deleteSubmit.bind(this);\n  }\n\n  exitPage(event) {\n    ReactDOM.render(React.createElement(App, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21\n      },\n      __self: this\n    }), document.getElementById('root'));\n  }\n\n  reflesh(userName, password) {\n    axios({\n      method: \"get\",\n      url: getUserBooksUrl() + \"/\" + this.props.userId,\n      auth: {\n        username: userName,\n        password: password\n      }\n    }).then(res => {\n      this.setState({\n        userbooks: res.data\n      });\n    }).catch(error => {\n      alert(\"Bağlantı hatası userbooks reflesh\");\n    });\n  }\n\n  renderData() {\n    return this.state.books.map((details, index) => {\n      const id = details.id,\n            bookName = details.bookName;\n      return React.createElement(\"option\", {\n        key: id,\n        value: id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, bookName);\n    });\n  }\n\n  add(userId, bookId) {\n    const book = {\n      id: bookId\n    };\n    const user = {\n      id: userId\n    };\n    axios({\n      method: \"post\",\n      url: getUserBooksUrl(),\n      data: {\n        user: user,\n        book: book\n      },\n      auth: {\n        username: this.props.userName,\n        password: this.props.password\n      }\n    }).then(res => {\n      this.reflesh(this.props.userName, this.props.password);\n    }).catch(error => {\n      alert(\"Ekleme başarısız\");\n    });\n  }\n\n  changedSelect(event) {\n    this.counter++;\n    this.setState({\n      selectedId: event.target.value\n    });\n\n    if (this.counter > 1) {\n      var book = this.state.books.find(books => books.id == event.target.value);\n      this.setState({\n        author: book.author\n      });\n      this.setState({\n        pages: book.pages\n      });\n    } else {\n      event.target.remove(0);\n      var authorDoc = document.getElementById(\"author\");\n      var pagesDoc = document.getElementById(\"pages\");\n      authorDoc.style.visibility = \"visible\";\n      pagesDoc.style.visibility = \"visible\";\n      var book = this.state.books.find(books => books.id == event.target.value);\n      this.setState({\n        author: book.author\n      });\n      this.setState({\n        pages: book.pages\n      });\n    }\n  }\n\n  handleSubmit(event) {\n    switch (event.target.name) {\n      case \"add\":\n        this.add(this.props.userId, this.state.selectedId);\n        break;\n\n      default:\n    }\n  }\n\n  deleteSubmit(event) {\n    const Id = event.target.name;\n    axios({\n      method: \"delete\",\n      url: getUserBooksUrl() + \"/\" + Id,\n      auth: {\n        username: this.props.userName,\n        password: this.props.password\n      }\n    }).then(res => {\n      this.reflesh(this.props.userName, this.props.password);\n    }).catch(error => {\n      alert(\"Silme başarısız Id: \" + Id + \" bulunmadı\");\n    });\n  }\n\n  renderTable() {\n    return this.state.userbooks.map((details, index) => {\n      const id = details.id,\n            book = details.book,\n            createdAt = details.createdAt;\n      const date = new Date(createdAt).getHours() + \":\" + new Date(createdAt).getMinutes() + \":\" + new Date(createdAt).getSeconds() + \" \" + new Date(createdAt).getDate() + \"/\" + (Number(new Date(createdAt).getMonth()) + 1) + \"/\" + new Date(createdAt).getFullYear();\n      return React.createElement(\"tr\", {\n        key: id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, book.bookName), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, date), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"X\",\n        name: id,\n        onClick: this.deleteSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      })));\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"box\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Detayla\",\n      name: \"details\",\n      onClick: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), React.createElement(\"select\", {\n      onChange: this.changedSelect,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Kitap Se\\xE7iniz\"), this.renderData()), React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"+\",\n      name: \"add\",\n      onClick: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"button\",\n      value: \"\\xC7\\u0131k\",\n      name: \"exit\",\n      onClick: this.exitPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      type: \"userName\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, this.props.userName)), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(\"table\", {\n      id: \"books\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, \"Kitap Ad\\u0131\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \"Tarih\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"D\\xFCzenle\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, this.renderTable())));\n  }\n\n}\n\nexport default UserPage;","map":{"version":3,"sources":["/Users/bunyo/React/react-libpro/src/UserPage.js"],"names":["React","axios","ReactDOM","App","getUserBooksUrl","getUsersUrl","UserPage","Component","constructor","props","state","books","userbooks","electedId","author","pages","counter","changedSelect","bind","handleSubmit","exitPage","deleteSubmit","event","render","document","getElementById","reflesh","userName","password","method","url","userId","auth","username","then","res","setState","data","catch","error","alert","renderData","map","details","index","id","bookName","add","bookId","book","user","selectedId","target","value","find","remove","authorDoc","pagesDoc","style","visibility","name","Id","renderTable","createdAt","date","Date","getHours","getMinutes","getSeconds","getDate","Number","getMonth","getFullYear"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAO,iBAAP;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,SAAQC,eAAR,QAA8B,gBAA9B;AACA,SAAQC,WAAR,QAA0B,gBAA1B;;AAEA,MAAMC,QAAN,SAAuBN,KAAK,CAACO,SAA7B,CAAuC;AACrCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AAACC,MAAAA,KAAK,EAACF,KAAK,CAACE,KAAb;AAAmBC,MAAAA,SAAS,EAACH,KAAK,CAACG,SAAnC;AAA6CC,MAAAA,SAAS,EAAC,GAAvD;AAA2DC,MAAAA,MAAM,EAAC,EAAlE;AAAqEC,MAAAA,KAAK,EAAC;AAA3E,KAAb;AACA,SAAKC,OAAL,GAAe,CAAf;AAEA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKE,QAAL,GAAgB,KAAKA,QAAL,CAAcF,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKG,YAAL,GAAoB,KAAKA,YAAL,CAAkBH,IAAlB,CAAuB,IAAvB,CAApB;AACC;;AACHE,EAAAA,QAAQ,CAACE,KAAD,EAAO;AACbpB,IAAAA,QAAQ,CAACqB,MAAT,CAAgB,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAhB,EAAwBC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAxB;AACD;;AACDC,EAAAA,OAAO,CAACC,QAAD,EAAUC,QAAV,EAAmB;AACxB3B,IAAAA,KAAK,CAAC;AACJ4B,MAAAA,MAAM,EAAE,KADJ;AAEJC,MAAAA,GAAG,EAAE1B,eAAe,KAAG,GAAlB,GAAsB,KAAKK,KAAL,CAAWsB,MAFlC;AAGJC,MAAAA,IAAI,EAAE;AACNC,QAAAA,QAAQ,EAAEN,QADJ;AAENC,QAAAA,QAAQ,EAAEA;AAFJ;AAHF,KAAD,CAAL,CAQCM,IARD,CAQMC,GAAG,IAAI;AACX,WAAKC,QAAL,CAAc;AAACxB,QAAAA,SAAS,EAACuB,GAAG,CAACE;AAAf,OAAd;AACF,KAVA,EAWCC,KAXD,CAWOC,KAAK,IAAI;AACdC,MAAAA,KAAK,CAAC,mCAAD,CAAL;AACF,KAbA;AAcD;;AACDC,EAAAA,UAAU,GAAG;AACT,WAAO,KAAK/B,KAAL,CAAWC,KAAX,CAAiB+B,GAAjB,CAAqB,CAACC,OAAD,EAAUC,KAAV,KAAoB;AAAA,YACtCC,EADsC,GACvBF,OADuB,CACtCE,EADsC;AAAA,YACnCC,QADmC,GACvBH,OADuB,CACnCG,QADmC;AAE7C,aACG;AAAQ,QAAA,GAAG,EAAED,EAAb;AAAiB,QAAA,KAAK,EAAEA,EAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA6BC,QAA7B,CADH;AAGF,KALM,CAAP;AAMF;;AACDC,EAAAA,GAAG,CAAChB,MAAD,EAAQiB,MAAR,EAAe;AAChB,UAAMC,IAAI,GAAG;AAACJ,MAAAA,EAAE,EAACG;AAAJ,KAAb;AACA,UAAME,IAAI,GAAG;AAACL,MAAAA,EAAE,EAACd;AAAJ,KAAb;AACA9B,IAAAA,KAAK,CAAC;AACJ4B,MAAAA,MAAM,EAAE,MADJ;AAEJC,MAAAA,GAAG,EAAE1B,eAAe,EAFhB;AAGJiC,MAAAA,IAAI,EAAE;AACJa,QAAAA,IAAI,EAAGA,IADH;AAEJD,QAAAA,IAAI,EAAGA;AAFH,OAHF;AAOJjB,MAAAA,IAAI,EAAE;AACNC,QAAAA,QAAQ,EAAE,KAAKxB,KAAL,CAAWkB,QADf;AAENC,QAAAA,QAAQ,EAAE,KAAKnB,KAAL,CAAWmB;AAFf;AAPF,KAAD,CAAL,CAYCM,IAZD,CAYMC,GAAG,IAAI;AACX,WAAKT,OAAL,CAAa,KAAKjB,KAAL,CAAWkB,QAAxB,EAAiC,KAAKlB,KAAL,CAAWmB,QAA5C;AACF,KAdA,EAeCU,KAfD,CAeOC,KAAK,IAAI;AACdC,MAAAA,KAAK,CAAC,kBAAD,CAAL;AACF,KAjBA;AAkBD;;AACDvB,EAAAA,aAAa,CAACK,KAAD,EAAO;AAClB,SAAKN,OAAL;AACA,SAAKoB,QAAL,CAAc;AAACe,MAAAA,UAAU,EAAG7B,KAAK,CAAC8B,MAAN,CAAaC;AAA3B,KAAd;;AACA,QAAG,KAAKrC,OAAL,GAAe,CAAlB,EAAoB;AAClB,UAAIiC,IAAI,GAAG,KAAKvC,KAAL,CAAWC,KAAX,CAAiB2C,IAAjB,CAAsB3C,KAAK,IAAIA,KAAK,CAACkC,EAAN,IAAYvB,KAAK,CAAC8B,MAAN,CAAaC,KAAxD,CAAX;AACA,WAAKjB,QAAL,CAAc;AAACtB,QAAAA,MAAM,EAAGmC,IAAI,CAACnC;AAAf,OAAd;AACA,WAAKsB,QAAL,CAAc;AAACrB,QAAAA,KAAK,EAAGkC,IAAI,CAAClC;AAAd,OAAd;AACD,KAJD,MAKI;AACFO,MAAAA,KAAK,CAAC8B,MAAN,CAAaG,MAAb,CAAoB,CAApB;AACA,UAAIC,SAAS,GAAGhC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAhB;AACA,UAAKgC,QAAQ,GAAGjC,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAAhB;AACA+B,MAAAA,SAAS,CAACE,KAAV,CAAgBC,UAAhB,GAA6B,SAA7B;AACAF,MAAAA,QAAQ,CAACC,KAAT,CAAeC,UAAf,GAA4B,SAA5B;AACA,UAAIV,IAAI,GAAG,KAAKvC,KAAL,CAAWC,KAAX,CAAiB2C,IAAjB,CAAsB3C,KAAK,IAAIA,KAAK,CAACkC,EAAN,IAAYvB,KAAK,CAAC8B,MAAN,CAAaC,KAAxD,CAAX;AACA,WAAKjB,QAAL,CAAc;AAACtB,QAAAA,MAAM,EAAGmC,IAAI,CAACnC;AAAf,OAAd;AACA,WAAKsB,QAAL,CAAc;AAACrB,QAAAA,KAAK,EAAGkC,IAAI,CAAClC;AAAd,OAAd;AACD;AACF;;AACDI,EAAAA,YAAY,CAACG,KAAD,EAAO;AACjB,YAAQA,KAAK,CAAC8B,MAAN,CAAaQ,IAArB;AACE,WAAK,KAAL;AACA,aAAKb,GAAL,CAAS,KAAKtC,KAAL,CAAWsB,MAApB,EAA2B,KAAKrB,KAAL,CAAWyC,UAAtC;AACE;;AACF;AAJF;AAMD;;AACC9B,EAAAA,YAAY,CAACC,KAAD,EAAO;AACnB,UAAMuC,EAAE,GAAGvC,KAAK,CAAC8B,MAAN,CAAaQ,IAAxB;AACA3D,IAAAA,KAAK,CAAC;AACJ4B,MAAAA,MAAM,EAAE,QADJ;AAEJC,MAAAA,GAAG,EAAE1B,eAAe,KAAG,GAAlB,GAAsByD,EAFvB;AAGJ7B,MAAAA,IAAI,EAAE;AACNC,QAAAA,QAAQ,EAAE,KAAKxB,KAAL,CAAWkB,QADf;AAENC,QAAAA,QAAQ,EAAE,KAAKnB,KAAL,CAAWmB;AAFf;AAHF,KAAD,CAAL,CAQCM,IARD,CAQMC,GAAG,IAAI;AACX,WAAKT,OAAL,CAAa,KAAKjB,KAAL,CAAWkB,QAAxB,EAAiC,KAAKlB,KAAL,CAAWmB,QAA5C;AACD,KAVD,EAWCU,KAXD,CAWOC,KAAK,IAAI;AACdC,MAAAA,KAAK,CAAC,yBAAuBqB,EAAvB,GAA0B,YAA3B,CAAL;AACD,KAbD;AAaO;;AACTC,EAAAA,WAAW,GAAE;AACT,WAAO,KAAKpD,KAAL,CAAWE,SAAX,CAAqB8B,GAArB,CAAyB,CAACC,OAAD,EAAUC,KAAV,KAAoB;AAAA,YACzCC,EADyC,GACnBF,OADmB,CACzCE,EADyC;AAAA,YACtCI,IADsC,GACnBN,OADmB,CACtCM,IADsC;AAAA,YACjCc,SADiC,GACnBpB,OADmB,CACjCoB,SADiC;AAEjD,YAAMC,IAAI,GAAG,IAAIC,IAAJ,CAASF,SAAT,EAAoBG,QAApB,KAAiC,GAAjC,GACX,IAAID,IAAJ,CAASF,SAAT,EAAoBI,UAApB,EADW,GACwB,GADxB,GAEX,IAAIF,IAAJ,CAASF,SAAT,EAAoBK,UAApB,EAFW,GAEwB,GAFxB,GAGX,IAAIH,IAAJ,CAASF,SAAT,EAAoBM,OAApB,EAHW,GAGqB,GAHrB,IAIVC,MAAM,CAAC,IAAIL,IAAJ,CAASF,SAAT,EAAoBQ,QAApB,EAAD,CAAN,GAAuC,CAJ7B,IAIkC,GAJlC,GAKX,IAAIN,IAAJ,CAASF,SAAT,EAAoBS,WAApB,EALF;AAMA,aACG;AAAI,QAAA,GAAG,EAAE3B,EAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKI,IAAI,CAACH,QAAV,CADH,EAEG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAKkB,IAAL,CAFH,EAGG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,KAAK,EAAC,GAA3B;AAA+B,QAAA,IAAI,EAAEnB,EAArC;AAAyC,QAAA,OAAO,EAAE,KAAKxB,YAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAJ,CAHH,CADH;AAOF,KAfM,CAAP;AAgBF;;AACHE,EAAAA,MAAM,GAAE;AACN,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,KAAK,EAAC,SAA3B;AAAqC,MAAA,IAAI,EAAC,SAA1C;AAAoD,MAAA,OAAO,EAAE,KAAKJ,YAAlE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADA,EAEE;AAAQ,MAAA,QAAQ,EAAE,KAAKF,aAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAQ,MAAA,KAAK,EAAC,GAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADA,EAEG,KAAKwB,UAAL,EAFH,CAFF,EAME;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,KAAK,EAAC,GAA3B;AAA+B,MAAA,IAAI,EAAC,KAApC;AAA0C,MAAA,OAAO,EAAE,KAAKtB,YAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANF,EAOE;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,KAAK,EAAC,aAA3B;AAAiC,MAAA,IAAI,EAAC,MAAtC;AAA6C,MAAA,OAAO,EAAE,KAAKC,QAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPF,EAQE;AAAG,MAAA,IAAI,EAAC,UAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAoB,KAAKX,KAAL,CAAWkB,QAA/B,CARF,CADF,EAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAXA,EAaA;AAAO,MAAA,EAAE,EAAC,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAHF,CADE,CADA,EAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKmC,WAAL,EADH,CARA,CAbA,CADF;AA4BD;;AAtJoC;;AAwJvC,eAAexD,QAAf","sourcesContent":["import React from 'react';\nimport axios from 'axios';\nimport ReactDOM from 'react-dom';\nimport \"./BooksPage.css\"\nimport App from \"./App\";\nimport {getUserBooksUrl} from \"./AppVariables\";\nimport {getUsersUrl} from \"./AppVariables\";\n\nclass UserPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {books:props.books,userbooks:props.userbooks,electedId:\"0\",author:\"\",pages:0};\n    this.counter = 0;\n\n    this.changedSelect = this.changedSelect.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.exitPage = this.exitPage.bind(this);\n    this.deleteSubmit = this.deleteSubmit.bind(this);\n    }\n  exitPage(event){\n    ReactDOM.render(<App/>, document.getElementById('root'));\n  }\n  reflesh(userName,password){\n    axios({\n      method: \"get\",\n      url: getUserBooksUrl()+\"/\"+this.props.userId,\n      auth: {\n      username: userName,\n      password: password\n    }\n    })\n    .then(res => {\n      this.setState({userbooks:res.data});\n   })\n    .catch(error => {\n      alert(\"Bağlantı hatası userbooks reflesh\")\n   });\n  }\n  renderData() {\n      return this.state.books.map((details, index) => {\n         const {id,bookName} = details;\n         return (\n            <option key={id} value={id}>{bookName}</option>\n         )\n      })\n   }\n   add(userId,bookId){\n     const book = {id:bookId};\n     const user = {id:userId};\n     axios({\n       method: \"post\",\n       url: getUserBooksUrl(),\n       data: {\n         user : user,\n         book : book\n       },\n       auth: {\n       username: this.props.userName,\n       password: this.props.password\n     }\n     })\n     .then(res => {\n       this.reflesh(this.props.userName,this.props.password);\n    })\n     .catch(error => {\n       alert(\"Ekleme başarısız\")\n    });\n   }\n   changedSelect(event){\n     this.counter++;\n     this.setState({selectedId : event.target.value});\n     if(this.counter > 1){\n       var book = this.state.books.find(books => books.id == event.target.value);\n       this.setState({author : book.author});\n       this.setState({pages : book.pages});\n     }\n     else{\n       event.target.remove(0);\n       var authorDoc = document.getElementById(\"author\");\n       var  pagesDoc = document.getElementById(\"pages\");\n       authorDoc.style.visibility = \"visible\";\n       pagesDoc.style.visibility = \"visible\";\n       var book = this.state.books.find(books => books.id == event.target.value);\n       this.setState({author : book.author});\n       this.setState({pages : book.pages});\n     }\n   }\n   handleSubmit(event){\n     switch (event.target.name) {\n       case \"add\":\n       this.add(this.props.userId,this.state.selectedId);\n         break;\n       default:\n     }\n   }\n     deleteSubmit(event){\n     const Id = event.target.name;\n     axios({\n       method: \"delete\",\n       url: getUserBooksUrl()+\"/\"+Id,\n       auth: {\n       username: this.props.userName,\n       password: this.props.password\n     }\n     })\n     .then(res => {\n       this.reflesh(this.props.userName,this.props.password);\n     })\n     .catch(error => {\n       alert(\"Silme başarısız Id: \"+Id+\" bulunmadı\");\n     });   }\n   renderTable(){\n       return this.state.userbooks.map((details, index) => {\n          const { id,book,createdAt } = details;\n          const date = new Date(createdAt).getHours() + \":\"\n          + new Date(createdAt).getMinutes() + \":\"\n          + new Date(createdAt).getSeconds() + \" \"\n          + new Date(createdAt).getDate() + \"/\"\n          + (Number(new Date(createdAt).getMonth())+1) + \"/\"\n          + new Date(createdAt).getFullYear();\n          return (\n             <tr key={id}>\n                <td>{book.bookName}</td>\n                <td>{date}</td>\n                <td><input type=\"submit\" value=\"X\" name={id} onClick={this.deleteSubmit}/></td>\n             </tr>\n          )\n       })\n    }\n  render(){\n    return(\n      <div>\n        <div className=\"box\">\n        <input type=\"submit\" value=\"Detayla\" name=\"details\" onClick={this.handleSubmit} />\n          <select onChange={this.changedSelect}>\n          <option value=\"0\">Kitap Seçiniz</option>\n            {this.renderData()}\n          </select>\n          <input type=\"submit\" value=\"+\" name=\"add\" onClick={this.handleSubmit} />\n          <input type=\"button\" value=\"Çık\" name=\"exit\" onClick={this.exitPage} />\n          <p type=\"userName\">{this.props.userName}</p>\n          </div>\n      <div>\n      </div>\n      <table id=\"books\">\n      <thead>\n    <tr>\n      <th>Kitap Adı</th>\n      <th>Tarih</th>\n      <th>Düzenle</th>\n    </tr>\n    </thead>\n      <tbody>\n        {this.renderTable()}\n        </tbody>\n    </table>\n      </div>\n    );\n  }\n}\nexport default UserPage;\n"]},"metadata":{},"sourceType":"module"}